<html>
<head>
<title>Hooks</title>
</head>
<body style="text-align:left;padding:100px;">

<p>
site_hook_initiation => Site:__construct()
<br>
The earliest hook that can be used
</p>

<p>
site_object_construct => Site:__construct()
<br>
Can be used to modify the site object
</p>

<p>
user_attributes => ManageUsers::as_content, UserRegistration::as_content, UserSettings::as_content
<br>
used to add additional user attributes to 
</p>

<p>
page_build_content => Page::build_content()
(was) build_content_loop => Page::build_content()
</p>

<p>
build_content_recipe_item => Page::build_content() within anonymous function $find_recipe_item
<br>
return $recipe_item
</p>

<p>
recipe_attributes => ManageRecipes::as_content()
</p>

<p>
create_component_before => Components::create_component($input)
<br>
can be used to reverse auto create.
</p>

<p>
recipe_components_each => Components::recipe_components
</p>

<p>
page_add_recipe => Page::get_components
<br>
return $recipe
</p>

<p>
build_content_callback => Page::build_content
<br>
return $sub_components
</p>

<p>
media_create_component, media_create_component_input, media_create_component_loop, media_update_component, media_delete_component
 => 
Media::create()
<br>
Look Ma, a component with hooks!
</p>

<p>
page_requested_components => Page:get_components
</p>

<p>
requested_sub_components => Page:get_sub_components
</p>

<p>
page_get_sub_components => Page:get_sub_components
(was) get_sub_components
</p>

<p>
<pre>
/* annonymous function to join recipes, save for possible later addition */
$recipe_joiner = function($current_recipe, $additional_recipe, $parts = array()) use (&$end_finder) {
if (isset($current_recipe[0]['components'])) {
$parts[] = $current_recipe[0];
return $recipe_joiner($current_recipe[0]['components'], $additional_recipe, $parts);
}
$current_recipe[0]['components'] = $additional_recipe;
$parts[] = $current_recipe[0];
return $parts;
};
$this->recipe = $recipe_joiner(json_decode($each_meta->meta_value, true), $this->recipe);
continue;
</pre>
</p>

<p>
input_sanitize_textarea => vce-input.php
<br>
For XSS filtering of textarea input
</p>

<p>
site_javascript_dependencies => Site:__construct
<br>
<pre>
// $javascript_dependencies['scripts']['*library*']
public static function site_javascript_dependencies($site, $javascript_dependencies) {
	
// create file path
$path = str_replace(BASEPATH, $site->site_url . '/' , dirname(__FILE__));
	
$javascript_dependencies['scripts']['tablesorter'] = $path . '/js/jquery.tablesorter.min.js';
$javascript_dependencies['styles']['tablesorter'] = $path . '/css/tablesorter.css';
		
return $javascript_dependencies;
	
}
</pre>
</p>

</body>
</html>